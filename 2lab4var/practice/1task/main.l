%option noyywrap
%{
int flag = 0;
%}

%%

\(\*([^*]|\*+[^)])*\*\)    { /* Удаляем комментарии (* ... *) */ }
\{[^}]*\}                  { /* Удаляем комментарии { ... } */ }
"#".*                      ECHO; /* Оставляем директивы компилятора */
.                          { printf("%s", yytext); }  /* Выводим всё остальное */

%%

int main(int argc, char **argv) {
    yylex();
    return 0;
}

